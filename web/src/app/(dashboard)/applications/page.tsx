'use client';

import { Button } from '@/components/ui/button';
import { ApplicationTable } from '@/components/applications/ApplicationTable';
import { Download } from 'lucide-react';
import type { Application } from '@/types';

// Mock data - will be replaced with API calls
const mockApplications: Application[] = [
  {
    id: 'app-001',
    leadId: 'lead-001',
    loanNumber: '2024-0123',
    status: 'ACTIVE',
    milestone: 'PROCESSING',
    property: {
      address: '123 Main St',
      city: 'Austin',
      state: 'TX',
      zipCode: '78701',
      county: 'Travis',
      propertyType: 'SFR',
      units: 1,
      yearBuilt: 2015,
      currentValue: 60000000,
    },
    loanTerms: {
      loanAmountCents: 45000000,
      interestRate: 7.25,
      loanTermMonths: 360,
      amortizationMonths: 360,
      loanPurpose: 'CASH_OUT_REFINANCE',
      occupancyType: 'INVESTMENT',
    },
    dscrCalculation: {
      grossRentalIncomeCents: 4800000,
      vacancyRate: 0.05,
      effectiveGrossIncomeCents: 4560000,
      annualTaxesCents: 1200000,
      annualInsuranceCents: 180000,
      annualHOACents: 0,
      floodInsuranceCents: 0,
      monthlyPITIACents: 306900,
      monthlyNOICents: 380000,
      dscr: 1.24,
      dscrTier: 'GOOD',
    },
    ltv: 0.75,
    creditScore: 742,
    assignedLOId: 'lo-001',
    assignedLO: { id: 'lo-001', firstName: 'Sarah', lastName: 'Johnson', email: 'sarah@example.com', role: 'LOAN_OFFICER', createdAt: '' },
    conditionCounts: { total: 8, pending: 3, cleared: 4, waived: 1 },
    createdAt: '2024-01-10T10:00:00Z',
    updatedAt: '2024-01-16T14:30:00Z',
    milestoneUpdatedAt: '2024-01-14T09:00:00Z',
  },
  {
    id: 'app-002',
    leadId: 'lead-002',
    loanNumber: '2024-0098',
    status: 'ACTIVE',
    milestone: 'PRE_APPROVED',
    property: {
      address: '456 Oak Ave',
      city: 'Tampa',
      state: 'FL',
      zipCode: '33601',
      county: 'Hillsborough',
      propertyType: 'DUPLEX',
      units: 2,
      yearBuilt: 2018,
      currentValue: 55000000,
    },
    loanTerms: {
      loanAmountCents: 38500000,
      interestRate: 7.0,
      loanTermMonths: 360,
      amortizationMonths: 360,
      loanPurpose: 'PURCHASE',
      occupancyType: 'INVESTMENT',
    },
    dscrCalculation: {
      grossRentalIncomeCents: 5400000,
      vacancyRate: 0.05,
      effectiveGrossIncomeCents: 5130000,
      annualTaxesCents: 960000,
      annualInsuranceCents: 240000,
      annualHOACents: 0,
      floodInsuranceCents: 120000,
      monthlyPITIACents: 256200,
      monthlyNOICents: 427500,
      dscr: 1.67,
      dscrTier: 'EXCELLENT',
    },
    ltv: 0.70,
    creditScore: 756,
    assignedLOId: 'lo-002',
    assignedLO: { id: 'lo-002', firstName: 'Mike', lastName: 'Chen', email: 'mike@example.com', role: 'LOAN_OFFICER', createdAt: '' },
    conditionCounts: { total: 5, pending: 5, cleared: 0, waived: 0 },
    createdAt: '2024-01-12T11:00:00Z',
    updatedAt: '2024-01-15T16:00:00Z',
    milestoneUpdatedAt: '2024-01-15T16:00:00Z',
  },
  {
    id: 'app-003',
    leadId: 'lead-003',
    loanNumber: '2024-0067',
    status: 'ACTIVE',
    milestone: 'DOCS_OUT',
    property: {
      address: '789 Pine Rd',
      city: 'Phoenix',
      state: 'AZ',
      zipCode: '85001',
      county: 'Maricopa',
      propertyType: 'FOURPLEX',
      units: 4,
      yearBuilt: 2010,
      currentValue: 90000000,
    },
    loanTerms: {
      loanAmountCents: 67500000,
      interestRate: 7.5,
      loanTermMonths: 360,
      amortizationMonths: 360,
      loanPurpose: 'RATE_TERM_REFINANCE',
      occupancyType: 'INVESTMENT',
    },
    dscrCalculation: {
      grossRentalIncomeCents: 9600000,
      vacancyRate: 0.05,
      effectiveGrossIncomeCents: 9120000,
      annualTaxesCents: 1560000,
      annualInsuranceCents: 360000,
      annualHOACents: 0,
      floodInsuranceCents: 0,
      monthlyPITIACents: 472050,
      monthlyNOICents: 600000,
      dscr: 1.27,
      dscrTier: 'GOOD',
    },
    ltv: 0.75,
    creditScore: 728,
    assignedLOId: 'lo-001',
    assignedLO: { id: 'lo-001', firstName: 'Sarah', lastName: 'Johnson', email: 'sarah@example.com', role: 'LOAN_OFFICER', createdAt: '' },
    conditionCounts: { total: 10, pending: 0, cleared: 10, waived: 0 },
    createdAt: '2024-01-05T09:00:00Z',
    updatedAt: '2024-01-16T10:00:00Z',
    milestoneUpdatedAt: '2024-01-16T10:00:00Z',
  },
  {
    id: 'app-004',
    leadId: 'lead-004',
    loanNumber: '2024-0045',
    status: 'APPROVED',
    milestone: 'FUNDED',
    property: {
      address: '321 Elm St',
      city: 'Atlanta',
      state: 'GA',
      zipCode: '30301',
      county: 'Fulton',
      propertyType: 'SFR',
      units: 1,
      yearBuilt: 2020,
      currentValue: 48000000,
    },
    loanTerms: {
      loanAmountCents: 33600000,
      interestRate: 7.125,
      loanTermMonths: 360,
      amortizationMonths: 360,
      loanPurpose: 'PURCHASE',
      occupancyType: 'INVESTMENT',
    },
    dscrCalculation: {
      grossRentalIncomeCents: 4320000,
      vacancyRate: 0.05,
      effectiveGrossIncomeCents: 4104000,
      annualTaxesCents: 840000,
      annualInsuranceCents: 144000,
      annualHOACents: 36000,
      floodInsuranceCents: 0,
      monthlyPITIACents: 226700,
      monthlyNOICents: 257000,
      dscr: 1.13,
      dscrTier: 'ACCEPTABLE',
    },
    ltv: 0.70,
    creditScore: 715,
    assignedLOId: 'lo-002',
    assignedLO: { id: 'lo-002', firstName: 'Mike', lastName: 'Chen', email: 'mike@example.com', role: 'LOAN_OFFICER', createdAt: '' },
    createdAt: '2024-01-02T08:00:00Z',
    updatedAt: '2024-01-13T15:00:00Z',
    milestoneUpdatedAt: '2024-01-13T15:00:00Z',
  },
  {
    id: 'app-005',
    leadId: 'lead-005',
    loanNumber: '2024-0134',
    status: 'ACTIVE',
    milestone: 'SUBMITTED',
    property: {
      address: '555 Maple Dr',
      city: 'Dallas',
      state: 'TX',
      zipCode: '75201',
      county: 'Dallas',
      propertyType: 'TRIPLEX',
      units: 3,
      yearBuilt: 2012,
      currentValue: 72000000,
    },
    loanTerms: {
      loanAmountCents: 54000000,
      interestRate: 7.375,
      loanTermMonths: 360,
      amortizationMonths: 360,
      loanPurpose: 'CASH_OUT_REFINANCE',
      occupancyType: 'INVESTMENT',
    },
    dscrCalculation: {
      grossRentalIncomeCents: 7200000,
      vacancyRate: 0.05,
      effectiveGrossIncomeCents: 6840000,
      annualTaxesCents: 1320000,
      annualInsuranceCents: 288000,
      annualHOACents: 0,
      floodInsuranceCents: 0,
      monthlyPITIACents: 368500,
      monthlyNOICents: 436000,
      dscr: 1.18,
      dscrTier: 'ACCEPTABLE',
    },
    ltv: 0.75,
    creditScore: 738,
    assignedLOId: 'lo-001',
    conditionCounts: { total: 12, pending: 8, cleared: 3, waived: 1 },
    createdAt: '2024-01-14T10:00:00Z',
    updatedAt: '2024-01-16T11:00:00Z',
    milestoneUpdatedAt: '2024-01-16T11:00:00Z',
  },
];

export default function ApplicationsPage() {
  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between">
        <div>
          <h2 className="text-2xl font-bold tracking-tight">Applications</h2>
          <p className="text-muted-foreground">
            Track loans through the pipeline
          </p>
        </div>
        <Button variant="outline">
          <Download className="mr-2 h-4 w-4" />
          Export
        </Button>
      </div>

      <ApplicationTable applications={mockApplications} />
    </div>
  );
}
